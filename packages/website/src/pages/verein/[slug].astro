---
import DefaultLayout from '../../layouts/default.layout.astro';
import Title from '../../components/title.component.astro';
import Info from '../../components/info.component.astro';

const sections = await Astro.glob('/src/content/verein/sections/*.section.mdx');
const { slug } = Astro.params;
const { pathname } = Astro.url;
const basePath = pathname.replace(new RegExp(`/${slug}$`), '');
---

<DefaultLayout lang="de" title="Kulturverein LochmÃ¼hle">
  <kvlm-navigation slot="header">
    {
      sections.map(({ frontmatter }) => (
        <kvlm-navigation-item
          inline
          active={frontmatter.slug === slug}
          href={`${basePath}/${frontmatter.slug}`}
          label={frontmatter.title}
        ></kvlm-navigation-item>
      ))
    }
    <kvlm-navigation-item inline href={`${basePath}/impressum`} label="Impressum"></kvlm-navigation-item>
  </kvlm-navigation>
  {
    sections.map(({ Content, frontmatter }) => {
      return (
        <kvlm-section
          id={`${basePath}/${frontmatter.slug}`}
          style={`
            --kvlm-section-background-from: ${frontmatter.backgroundFrom};
            --kvlm-section-background-to: ${frontmatter.backgroundTo};
            --kvlm-section-color: ${frontmatter.color};
          `}
        >
          <Content components={{ h1: Title, p: Info }} />
        </kvlm-section>
      );
    })
  }
</DefaultLayout>
