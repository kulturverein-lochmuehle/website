---
import DefaultLayout from '../../layouts/default.layout.astro';
import Section from '../../components/section.component.astro';
import NavItem from '../../components/nav-item.component.astro';
import Title from '../../components/title.component.astro';
import Info from '../../components/info.component.astro';

const sections = await Astro.glob('./sections/*.section.mdx');
---

<DefaultLayout lang="de" title="Kulturverein LochmÃ¼hle">
  <kvlm-navigation slot="header">
    {
      sections.map(({ frontmatter: { slug, title } }) => (
        <NavItem href={`${Astro.url.pathname}/${slug}`} label={title} />
      ))
    }
    <NavItem href={`${Astro.url.pathname}/impressum`} label="Impressum" />
  </kvlm-navigation>
  {
    sections.map(({ Content, frontmatter }) => {
      return (
        <Section {...frontmatter} slug={`${Astro.url.pathname}/${frontmatter.slug}`}>
          <Content components={{ h1: Title, p: Info }} />
        </Section>
      );
    })
  }
</DefaultLayout>
