---
import { Navigation, NavigationItem, Section } from '@kvlm/ui';

import DefaultLayout from '../../layouts/default.layout.astro';
import Title from '../../components/title.component.astro';
import Info from '../../components/info.component.astro';

const sections = await Astro.glob('/src/content/verein/sections/*.section.mdx');
---

<DefaultLayout lang="de" title="Kulturverein LochmÃ¼hle">
  <Navigation client:load slot="header">
    {
      sections.map(({ frontmatter: { slug, title } }) => (
        <NavigationItem client:load href={`${Astro.url.pathname}/${slug}`} label={title} />
      ))
    }
    <NavigationItem client:load href={`${Astro.url.pathname}/impressum`} label="Impressum" />
  </Navigation>
  {
    sections.map(({ Content, frontmatter }) => {
      return (
        <Section
          client:visible
          id={`${Astro.url.pathname}/${frontmatter.slug}`}
          style={`
            --kvlm-section-background-from: ${frontmatter.backgroundFrom};
            --kvlm-section-background-to: ${frontmatter.backgroundTo};
            --kvlm-section-color: ${frontmatter.color};
          `}
        >
          <Content components={{ h1: Title, p: Info }} />
        </Section>
      );
    })
  }
</DefaultLayout>
